{"version":3,"sources":["file:///Users/xiejiapei/NewProject_1/assets/script/framework/GameRoot.ts"],"names":["_decorator","Component","AudioSource","assert","game","setting","audioManager","ccclass","property","GameRoot","onLoad","audioSource","getComponent","_audioSource","addPersistRootNode","node","instance","init","onEnable","playMusic","checkState","start","cocosAnalytics","enableDebug"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,I,OAAAA,I;;AAC5CC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,Y,iBAAAA,Y;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;0BAKjBS,Q,WADZF,OAAO,CAAC,UAAD,C,UAGHC,QAAQ,CAACN,WAAD,C,2BAHb,MACaO,QADb,SAC8BR,SAD9B,CACwC;AAAA;AAAA;;AAAA;AAAA;;AAKpCS,QAAAA,MAAM,GAAI;AACN,cAAMC,WAAW,GAAG,KAAKC,YAAL,CAAkBV,WAAlB,CAApB;AACAC,UAAAA,MAAM,CAACQ,WAAD,CAAN;AACA,eAAKE,YAAL,GAAoBF,WAApB;AACAP,UAAAA,IAAI,CAACU,kBAAL,CAAwB,KAAKC,IAA7B,EAJM,CAMN;;AACA;AAAA;AAAA,4CAAaC,QAAb,CAAsBC,IAAtB,CAA2B,KAAKJ,YAAhC;AACH;;AAEDK,QAAAA,QAAQ,GAAI;AACR;AACA;AACA;AAAA;AAAA,4CAAaF,QAAb,CAAsBG,SAAtB,CAAgC,IAAhC;AACA;AAAA;AAAA,kCAAQC,UAAR;AACH;;AAEDC,QAAAA,KAAK,GAAE;AACH,cAAG,OAAOC,cAAP,KAA0B,WAA7B,EAAyC;AACrCA,YAAAA,cAAc,CAACC,WAAf,CAA2B,IAA3B;AACH;AACJ;;AA1BmC,O;;;;;iBAGA,I","sourcesContent":["\nimport { _decorator, Component, AudioSource, assert, game } from 'cc';\nimport { setting } from '../ui/main/setting';\nimport { audioManager } from './audioManager';\nconst { ccclass, property } = _decorator;\n\ndeclare const cocosAnalytics: any;\n\n@ccclass('GameRoot')\nexport class GameRoot extends Component {\n\n    @property(AudioSource)\n    private _audioSource: AudioSource = null!;\n\n    onLoad () {\n        const audioSource = this.getComponent(AudioSource)!;\n        assert(audioSource);\n        this._audioSource = audioSource;\n        game.addPersistRootNode(this.node);\n\n        // init AudioManager\n        audioManager.instance.init(this._audioSource);\n    }\n\n    onEnable () {\n        // NOTE: 常驻节点在切场景时会暂停音乐，需要在 onEnable 继续播放\n        // 之后需要在引擎侧解决这个问题\n        audioManager.instance.playMusic(true);\n        setting.checkState();\n    }\n\n    start(){\n        if(typeof cocosAnalytics !== 'undefined'){\n            cocosAnalytics.enableDebug(true);\n        }\n    }\n}"]}