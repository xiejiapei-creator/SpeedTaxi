{"version":3,"sources":["file:///Users/xiejiapei/Documents/3D%20Game/Car/assets/script/ui/shop/shopPage.ts"],"names":["_decorator","Component","Prefab","instantiate","localConfig","shopItem","ccclass","property","MAX_PAGE_SIZE","shopPage","page","start","setPage","iPage","show","arrCars","instance","getCars","end","idxCnt","idx","item","node","children","length","pfShopItem","parent","getComponent","unSelectAll","forEach","nodeItem","select","unUseAll","used","refreshUse","carId","carInfo","ID","onItemClick"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAUSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,M,OAAAA,M;AAAcC,MAAAA,W,OAAAA,W;;AACrCC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,Q,iBAAAA,Q;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;AAExBQ,MAAAA,a,GAAgB,C,EAAM;;0BAGfC,Q,WADZH,OAAO,CAAC,UAAD,C,UAEHC,QAAQ,CAACL,MAAD,C,2BAFb,MACaO,QADb,SAC8BR,SAD9B,CACwC;AAAA;AAAA;;AAAA;;AAAA,eAIpCS,IAJoC,GAIrB,CAJqB;AAAA;;AAMpC;AAEAC,QAAAA,KAAK,GAAI,CACL;AACH;;AAEDC,QAAAA,OAAO,CAAEC,KAAF,EAAiB;AACpB,eAAKH,IAAL,GAAYG,KAAZ;AACH;;AAEDC,QAAAA,IAAI,GAAI;AACJ,cAAIC,OAAO,GAAG;AAAA;AAAA,0CAAYC,QAAZ,CAAqBC,OAArB,EAAd;AAEA,cAAIN,KAAK,GAAG,KAAKD,IAAL,GAAYF,aAAxB;AACA,cAAIU,GAAG,GAAG,CAAC,KAAKR,IAAL,GAAY,CAAb,IAAkBF,aAA5B;AAEA,cAAIW,MAAM,GAAG,CAAb;;AACA,eAAK,IAAIC,GAAG,GAAGT,KAAf,EAAsBS,GAAG,GAAGF,GAA5B,EAAiCE,GAAG,IAAGD,MAAM,EAA7C,EAAiD;AAC7C,gBAAIE,IAAU,GAAG,IAAjB;;AACA,gBAAIF,MAAM,GAAG,KAAKG,IAAL,CAAUC,QAAV,CAAmBC,MAAhC,EAAwC;AACpCH,cAAAA,IAAI,GAAG,KAAKC,IAAL,CAAUC,QAAV,CAAmBJ,MAAnB,CAAP;AACH,aAFD,MAEO;AACHE,cAAAA,IAAI,GAAGlB,WAAW,CAAC,KAAKsB,UAAN,CAAlB;AACAJ,cAAAA,IAAI,CAACK,MAAL,GAAc,KAAKJ,IAAnB;AACH;;AAEDD,YAAAA,IAAI,CAACM,YAAL;AAAA;AAAA,sCAA6Bb,IAA7B,CAAkCC,OAAO,CAACK,GAAD,CAAzC;AACH;AACJ;;AAEDQ,QAAAA,WAAW,GAAI;AACX,eAAKN,IAAL,CAAUC,QAAV,CAAmBM,OAAnB,CAA4BC,QAAD,IAAa;AACpCA,YAAAA,QAAQ,CAACH,YAAT;AAAA;AAAA,sCAAiCI,MAAjC,GAA0C,KAA1C;AACH,WAFD;AAGH;;AAEDC,QAAAA,QAAQ,GAAI;AACR,eAAKV,IAAL,CAAUC,QAAV,CAAmBM,OAAnB,CAA4BC,QAAD,IAAa;AACpCA,YAAAA,QAAQ,CAACH,YAAT;AAAA;AAAA,sCAAiCM,IAAjC,GAAwC,KAAxC;AACH,WAFD;AAGH;;AAEDC,QAAAA,UAAU,CAAEC,KAAF,EAAiB;AACvB,eAAKb,IAAL,CAAUC,QAAV,CAAmBM,OAAnB,CAA4BC,QAAD,IAAa;AACpC,gBAAIT,IAAI,GAAGS,QAAQ,CAACH,YAAT;AAAA;AAAA,qCAAX;;AACA,gBAAIN,IAAI,CAACe,OAAL,CAAaC,EAAb,KAAoBF,KAAxB,EAA+B;AAC3Bd,cAAAA,IAAI,CAACiB,WAAL;AACH;AACJ,WALD;AAMH;;AAvDmC,O;;;;;iBAEf,I","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\nimport { _decorator, Component, Prefab, Node, instantiate } from \"cc\";\nimport { localConfig } from \"../../framework/localConfig\";\nimport { shopItem } from \"./shopItem\";\nconst { ccclass, property } = _decorator;\n\nconst MAX_PAGE_SIZE = 9;    //一页最多9个\n\n@ccclass(\"shopPage\")\nexport class shopPage extends Component {\n    @property(Prefab)\n    pfShopItem: Prefab = null!;\n\n    page: number = 0;\n\n    // objShopItems: any = {};\n\n    start () {\n        // Your initialization goes here.\n    }\n\n    setPage (iPage: number) {\n        this.page = iPage;\n    }\n\n    show () {\n        let arrCars = localConfig.instance.getCars();\n\n        let start = this.page * MAX_PAGE_SIZE;\n        let end = (this.page + 1) * MAX_PAGE_SIZE;\n\n        let idxCnt = 0;\n        for (let idx = start; idx < end; idx++,idxCnt++) {\n            let item: Node = null!;\n            if (idxCnt < this.node.children.length) {\n                item = this.node.children[idxCnt];\n            } else {\n                item = instantiate(this.pfShopItem);\n                item.parent = this.node\n            }\n\n            item.getComponent(shopItem)!.show(arrCars[idx]);\n        }\n    }\n\n    unSelectAll () {\n        this.node.children.forEach((nodeItem) =>{\n            nodeItem.getComponent(shopItem)!.select = false;\n        });\n    }\n\n    unUseAll () {\n        this.node.children.forEach((nodeItem) =>{\n            nodeItem.getComponent(shopItem)!.used = false;\n        });\n    }\n\n    refreshUse (carId: number) {\n        this.node.children.forEach((nodeItem) =>{\n            let item = nodeItem.getComponent(shopItem)!;\n            if (item.carInfo.ID === carId) {\n                item.onItemClick();\n            }\n        });\n    }\n}\n"]}