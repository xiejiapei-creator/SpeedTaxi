{"version":3,"sources":["file:///Users/xiejiapei/Documents/3D%20Game/Car/assets/script/ui/signIn/signIn.ts"],"names":["_decorator","Component","SpriteFrame","Sprite","Node","Prefab","Button","instantiate","localConfig","playerData","constant","uiManager","signInItem","gameLogic","util","clientEvent","i18n","ccclass","property","signIn","currentDay","arrReceived","arrAfterFillSignIn","isTodayReceived","isAllReceived","arrSignInItemScript","currentReward","currentRewardType","isHadCar","createDate","getCarDate","start","show","instance","updateSignInCurrentDay","signInInfo","playerInfo","receivedDays","afterFillSignInDays","updateRewardIcon","SHARE_FUNCTION","SIGNIN","spDoubleBtnIcon","showSignInInfo","setButtonStyle","receiveStatus","getSignInReceivedInfo","ndBtnDouble","getComponent","spriteFrame","sfGray","sfBlue","interactable","ndBtnReceive","arrSignIn","getTableArr","rewardType","REWARD_TYPE","CAR","isHadCarAndDuringPeriod","amount","active","ndBtnNormal","idx","length","day","ID","isReceived","includes","status","SIGNIN_REWARD_STATUS","RECEIVED","RECEIVABLE","FILL_SIGNIN","AFTER_FILL_SIGNIN","UNRECEIVABLE","node","arrNodeDay","signInItemNode","getChildByName","pbSignInItem","addChild","signInItemScript","init","push","receiveReward","itemInfo","isDouble","callback","title","t","targetItemInfo","clone","targetCar","queryByID","cars","indexOf","GOLD","GOLD_REWARD","SECOND","SEVENT","shiftFromPopupSeq","updatePlayerInfo","showFlyReward","dispatchEvent","pushToPopupSeq","receiveClick","j","element","_parent","markReceived","onBtnDoubleClick","onBtnNormalClick","onBtnReceiveClick","onBtnCloseClick"],"mappings":"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","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\nimport { _decorator, Component, SpriteFrame, Sprite, Widget, Node, Prefab, Button, instantiate } from \"cc\";\nimport { localConfig } from '../../framework/localConfig';\nimport { playerData } from '../../framework/playerData';\nimport { constant } from '../../framework/constant';\nimport { uiManager } from \"../../framework/uiManager\";\nimport { signInItem } from \"./signInItem\";\nimport { gameLogic } from \"../../logic/gameLogic\";\nimport { util } from \"../../framework/util\";\nimport { clientEvent } from \"../../framework/clientEvent\";\nimport { i18n } from \"../../i18nMaster/runtime-scripts/LanguageData\";\n\n\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"signIn\")\nexport class signIn extends Component {\n    /* class member could be defined like this */\n    // dummy = '';\n\n    /* use `property` decorator if your want the member to be serializable */\n    // @property\n    // serializableDummy = 0;\n\n    //普通领取按钮\n    @property(Node)\n    ndBtnNormal: Node = null!;\n\n    //双倍领取按钮\n    @property(Node)\n    ndBtnDouble: Node = null!;\n\n    //领取按钮\n    @property(Node)\n    ndBtnReceive: Node = null!;\n\n    // @property(Node)\n    // ndReceiveIcon: Node = null!;\n\n    //关闭按钮\n    @property(Node)\n    ndBtnClose: Node = null!;\n\n    //暂不领取按钮\n    // @property(Node)\n    // ndBtnNotYet: Node = null!;\n\n    //双倍领取按钮上图标\n    @property(Sprite)\n    spDoubleBtnIcon: Sprite = null!;\n\n    // @property(Sprite)\n    // spReceiveBtnIcon: Sprite = null!;\n\n    //双倍领取按钮背景\n    @property(SpriteFrame)\n    sfBlue: SpriteFrame = null!;\n\n    //双倍领取按钮背景\n    @property(SpriteFrame)\n    sfGray: SpriteFrame = null!;\n\n    //视频按钮图片\n    @property(SpriteFrame)\n    sfVideo: SpriteFrame = null!;\n\n    //分享图片\n    @property(SpriteFrame)\n    sfShare: SpriteFrame = null!;\n\n    //天数列表\n    @property(Node)\n    arrNodeDay: Node[] = [];\n\n    //子预制件\n    @property(Prefab)\n    pbSignInItem: Prefab = null!;\n\n    //当前日期\n    currentDay = 0;\n\n    //已经领取的日期数组\n    arrReceived: number[] = [];\n\n    //已经补签后可领取的日期数组\n    arrAfterFillSignIn: number[] = [];\n\n    //当天是否已经领取\n    isTodayReceived = false;\n\n    //是否领完当前可以领取的奖励\n    isAllReceived = false;\n\n    //存放字节点脚本的集合\n    arrSignInItemScript: signInItem[] = [];\n\n    currentReward: any;\n\n    currentRewardType: any;\n\n    //当天奖励如果是车，则判断下该车是否已拥有\n    isHadCar: any;\n\n    //签到创建时间\n    createDate: any;\n\n    //获得到指定车辆的时间\n    getCarDate: any;\n\n    start () {\n        // Your initialization goes here.\n    }\n\n    show () {\n        playerData.instance.updateSignInCurrentDay();\n\n        let signInInfo = playerData.instance.playerInfo.signInInfo;\n        this.currentDay = signInInfo.currentDay;\n        this.arrReceived = signInInfo.receivedDays;\n        this.arrAfterFillSignIn = signInInfo.afterFillSignInDays;\n\n        gameLogic.updateRewardIcon(constant.SHARE_FUNCTION.SIGNIN, this.spDoubleBtnIcon);\n        // gameLogic.updateRewardIcon(constant.SHARE_FUNCTION.SIGNIN, this.spReceiveBtnIcon);\n\n        this.showSignInInfo();\n\n        this.setButtonStyle();\n\n        // this.ndReceiveIcon.active = true;\n    }\n\n    /**\n     * 分为“双倍领取-普通领取-关闭”， “领取-暂不领取-关闭”两种形式,当天奖励为金币显示第一种，为车辆显示第二种\n     */\n    setButtonStyle () {\n        //如果今天领取完了就将双倍领取按钮或领取按钮置灰\n        let receiveStatus = playerData.instance.getSignInReceivedInfo();\n        this.isTodayReceived = receiveStatus.isTodayReceived;\n        this.isAllReceived = receiveStatus.isAllReceived;\n        this.ndBtnDouble.getComponent(Sprite)!.spriteFrame = this.isTodayReceived ? this.sfGray : this.sfBlue;\n        this.ndBtnDouble.getComponent(Button)!.interactable = !this.isTodayReceived;\n        this.ndBtnReceive.getComponent(Sprite)!.spriteFrame = this.isTodayReceived ? this.sfGray : this.sfBlue;\n        this.ndBtnReceive.getComponent(Button)!.interactable = !this.isTodayReceived;\n\n        let arrSignIn = localConfig.instance.getTableArr(\"signIn\");\n        this.currentReward = arrSignIn[this.currentDay - 1];\n        this.currentRewardType = this.currentReward.rewardType;\n\n        if (this.currentRewardType === constant.REWARD_TYPE.CAR) {\n            if (playerData.instance.isHadCarAndDuringPeriod(this.currentReward.amount)) {\n                this.ndBtnDouble.active = true;\n                this.ndBtnReceive.active = false;\n                this.ndBtnNormal.active = !this.isTodayReceived;\n                // this.ndBtnNotYet.active = false;\n            } else {\n                this.ndBtnDouble.active = false;\n                this.ndBtnReceive.active = true;\n                this.ndBtnNormal.active = false;\n                // this.ndBtnNotYet.active = !this.isTodayReceived;\n            }\n        } else {\n            this.ndBtnDouble.active = true;\n            this.ndBtnReceive.active = false;\n            this.ndBtnNormal.active = !this.isTodayReceived;\n            // this.ndBtnNotYet.active = false;\n        }\n    }\n\n    showSignInInfo () {\n        this.arrSignInItemScript = [];\n        let arrSignIn = localConfig.instance.getTableArr(\"signIn\");\n\n        for (let idx = 0; idx < arrSignIn.length; idx++) {\n            let day: number = arrSignIn[idx].ID;\n            let isReceived = this.arrReceived.includes(day) ? true : false;//从签到数组中判断是否已经领取\n            if (day <= this.currentDay) {\n                //状态设置为已领取或者可领取\n                arrSignIn[idx].status = isReceived ? constant.SIGNIN_REWARD_STATUS.RECEIVED : constant.SIGNIN_REWARD_STATUS.RECEIVABLE;\n                if (arrSignIn[idx].status === constant.SIGNIN_REWARD_STATUS.RECEIVABLE && day < this.currentDay) {\n                    arrSignIn[idx].status = constant.SIGNIN_REWARD_STATUS.FILL_SIGNIN;\n                    if (this.arrAfterFillSignIn.includes(day)) {\n                        arrSignIn[idx].status = constant.SIGNIN_REWARD_STATUS.AFTER_FILL_SIGNIN;\n                    }\n                }\n            } else {\n                //不可领取\n                arrSignIn[idx].status = constant.SIGNIN_REWARD_STATUS.UNRECEIVABLE;\n            }\n            // 确定布局后，设置位置\n            let node = this.arrNodeDay[idx];\n            let signInItemNode: Node | null = null;\n            if (!node.getChildByName('signInItem')) {\n                signInItemNode = instantiate(this.pbSignInItem);\n                node.addChild(signInItemNode);\n            } else {\n                signInItemNode = node.getChildByName('signInItem')!;\n            }\n            let signInItemScript = signInItemNode.getComponent(signInItem)!;\n            signInItemScript.init(arrSignIn[idx], this);\n\n            if (!this.arrSignInItemScript.includes(signInItemScript)) {\n                this.arrSignInItemScript.push(signInItemScript);\n            }\n        };\n    }\n\n    /**\n     * 领取奖励\n     *\n     * @param {object} itemInfo 单个奖励信息\n     * @param {boolean} itemInfo 是否是双倍奖励\n     * @param {function} callback 更新签到界面的UI\n     */\n    receiveReward (itemInfo: any, isDouble: boolean, callback: Function, ) {\n        let day:number = itemInfo.ID;\n        //大于可领奖天数点击图标不能领取\n        if (this.currentDay < day) {\n            return;\n        }\n\n        let title = i18n.t(\"showReward.signinReward\");\n        let targetItemInfo = util.clone(itemInfo);\n\n        if (itemInfo.ID == 2 || itemInfo.ID == 7) {\n            let targetCar = localConfig.instance.queryByID('car', itemInfo.amount);\n            targetItemInfo.ID = targetCar.ID;\n            let isHadCar = playerData.instance.playerInfo.cars.indexOf(targetCar.ID) !== -1;\n            if (isHadCar) {\n                targetItemInfo.rewardType = constant.REWARD_TYPE.GOLD;\n                targetItemInfo.amount = itemInfo.ID == 2 ? constant.GOLD_REWARD.SECOND : constant.GOLD_REWARD.SEVENT;\n            }\n        }\n\n        targetItemInfo.amount = isDouble ? targetItemInfo.amount *= 2 : targetItemInfo.amount;\n\n        uiManager.instance.shiftFromPopupSeq('signIn/signIn');\n        // this.unschedule(this.showBtnSecondaryCallback);\n\n        if (targetItemInfo.rewardType === constant.REWARD_TYPE.GOLD) {\n            playerData.instance.updatePlayerInfo('gold', targetItemInfo.amount);\n            gameLogic.showFlyReward(constant.REWARD_TYPE.GOLD, ()=>{\n                clientEvent.dispatchEvent('updateGold');\n            });\n\n            callback && callback();\n            return;\n        }\n\n        uiManager.instance.pushToPopupSeq('common/showReward', 'showReward', [targetItemInfo, false, title, callback]);\n    }\n\n    /**\n     * 点击领取\n     *\n     * @param {boolean} isDouble\n     * @memberof signIn\n     */\n    receiveClick (isDouble: boolean) {\n        for (let j = 0; j < this.arrSignInItemScript.length; j++ ) {\n            let element = this.arrSignInItemScript[j];\n            //只有今天的状态才存在RECEIVABLE\n            if (element.itemInfo.status === constant.SIGNIN_REWARD_STATUS.RECEIVABLE) {\n                element._parent.receiveReward(element.itemInfo, isDouble, ()=>{\n                    element.markReceived();\n                });\n                break;\n            }\n        }\n    }\n\n    /**\n     * 双倍领取\n     */\n    onBtnDoubleClick () {\n        // 用户 TODO：此处可实现看视频领双倍福利功能\n        // gameLogic.openReward(constant.SHARE_FUNCTION.SIGNIN, (err)=>{\n        //    if (!err) {\n             this.receiveClick(true);\n        //    }\n        // })\n    }\n\n    /**\n     * 普通领取\n     */\n    onBtnNormalClick () {\n        this.receiveClick(false);\n    }\n\n    /**\n     * 领取\n     */\n    onBtnReceiveClick () {\n        // 用户 TODO：此处可实现看视频领福利功能\n        // gameLogic.openReward(constant.SHARE_FUNCTION.SIGNIN, (err)=>{\n        //     if (!err) {\n              this.receiveClick(false);\n            // }\n        //  })\n    }\n\n    /**\n     * 暂不领取,关闭\n     */\n    onBtnCloseClick () {\n        uiManager.instance.shiftFromPopupSeq('signIn/signIn');\n    }\n\n}\n"]}