{"version":3,"sources":["file:///Users/xiejiapei/SpeedTaxi/assets/script/ui/online/onlineDouble.ts"],"names":["_decorator","Component","Label","Sprite","gameLogic","uiManager","util","constant","playerData","clientEvent","ccclass","property","onlineDouble","rewardMoney","overCallback","start","show","money","cb","lbGoldNormal","string","formatMoney","lbGoldMulti","updateRewardIcon","SHARE_FUNCTION","ONLINE","spIcon","onBtnGetNormalClick","rewardOver","onBtnGetMultiClick","openReward","err","instance","updatePlayerInfo","hideDialog","showFlyReward","REWARD_TYPE","GOLD","dispatchEvent","onBtnCloseClick"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,M,OAAAA,M;;AAC9BC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,I,iBAAAA,I;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,U,iBAAAA,U;;AACAC,MAAAA,W,iBAAAA,W;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBX,U;;8BAGjBY,Y,WADZF,OAAO,CAAC,cAAD,C,UAKHC,QAAQ,CAACT,KAAD,C,UAGRS,QAAQ,CAACT,KAAD,C,UAGRS,QAAQ,CAACR,MAAD,C,2BAXb,MACaS,YADb,SACkCX,SADlC,CAC4C;AAAA;AAAA;AAAA,eACxCY,WADwC,GAClB,CADkB;AAAA,eAExCC,YAFwC,GAEf,IAFe;;AAAA;;AAAA;;AAAA;AAAA;;AAaxCC,QAAAA,KAAK,GAAI,CACL;AACH;;AAEDC,QAAAA,IAAI,CAAEC,KAAF,EAAiBC,EAAjB,EAA+B;AAC/B,eAAKL,WAAL,GAAmBI,KAAnB;AACA,eAAKH,YAAL,GAAoBI,EAApB;AAEA,eAAKC,YAAL,CAAkBC,MAAlB,GAA2B;AAAA;AAAA,4BAAKC,WAAL,CAAiBJ,KAAjB,CAA3B;AAEA,eAAKK,WAAL,CAAiBF,MAAjB,GAA0B;AAAA;AAAA,4BAAKC,WAAL,CAAiBJ,KAAK,GAAG,CAAzB,CAA1B;AAEA;AAAA;AAAA,sCAAUM,gBAAV,CAA2B;AAAA;AAAA,oCAASC,cAAT,CAAwBC,MAAnD,EAA2D,KAAKC,MAAhE;AACH;;AAEDC,QAAAA,mBAAmB,GAAI;AACnB;AACA,eAAKC,UAAL,CAAgB,KAAKf,WAArB;AACH;;AAEDgB,QAAAA,kBAAkB,GAAI;AAClB;AACA;AAAA;AAAA,sCAAUC,UAAV,CAAqB;AAAA;AAAA,oCAASN,cAAT,CAAwBC,MAA7C,EAAsDM,GAAD,IAAO;AACxD,gBAAI,CAACA,GAAL,EAAU;AACN,mBAAKH,UAAL,CAAgB,KAAKf,WAAL,GAAmB,CAAnC;AACH;AACJ,WAJD;AAKH;;AAEDe,QAAAA,UAAU,CAAEX,KAAF,EAAiB;AACvB;AAEA;AACA;AAAA;AAAA,wCAAWe,QAAX,CAAoBC,gBAApB,CAAqC,MAArC,EAA6ChB,KAA7C;AACA;AAAA;AAAA,sCAAUe,QAAV,CAAmBE,UAAnB,CAA8B,mBAA9B;AAEA;AAAA;AAAA,sCAAUC,aAAV,CAAwB;AAAA;AAAA,oCAASC,WAAT,CAAqBC,IAA7C,EAAmD,MAAI;AACnD;AAAA;AAAA,4CAAYC,aAAZ,CAA0B,YAA1B;AACH,WAFD;;AAIA,cAAI,KAAKxB,YAAT,EAAuB;AACnB,iBAAKA,YAAL;AACH;AACJ;;AAEDyB,QAAAA,eAAe,GAAI;AACf;AAAA;AAAA,sCAAUP,QAAV,CAAmBE,UAAnB,CAA8B,mBAA9B;AACH,SA5DuC,CA8DxC;AACA;AACA;;;AAhEwC,O;;;;;iBAKlB,I;;;;;;;iBAGD,I;;;;;;;iBAGJ,I","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\nimport { _decorator, Component, Label, Sprite } from \"cc\";\nimport { gameLogic } from \"../../logic/gameLogic\";\nimport { uiManager } from \"../../framework/uiManager\";\nimport { util } from \"../../framework/util\";\nimport { constant } from \"../../framework/constant\";\nimport { playerData } from \"../../framework/playerData\";\nimport { clientEvent } from \"../../framework/clientEvent\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"onlineDouble\")\nexport class onlineDouble extends Component {\n    rewardMoney: number = 0;\n    overCallback: Function = null;\n\n    @property(Label)\n    lbGoldNormal: Label = null;\n\n    @property(Label)\n    lbGoldMulti: Label = null;\n\n    @property(Sprite)\n    spIcon: Sprite = null;\n\n    start () {\n        // Your initialization goes here.\n    }\n\n    show (money: number, cb: Function) {\n        this.rewardMoney = money;\n        this.overCallback = cb;\n\n        this.lbGoldNormal.string = util.formatMoney(money);\n\n        this.lbGoldMulti.string = util.formatMoney(money * 3);\n\n        gameLogic.updateRewardIcon(constant.SHARE_FUNCTION.ONLINE, this.spIcon);\n    }\n\n    onBtnGetNormalClick () {\n        //普通领取\n        this.rewardOver(this.rewardMoney);\n    }\n\n    onBtnGetMultiClick () {\n        //3倍领取\n        gameLogic.openReward(constant.SHARE_FUNCTION.ONLINE, (err)=>{\n            if (!err) {\n                this.rewardOver(this.rewardMoney * 3);\n            }\n        });\n    }\n\n    rewardOver (money: number) {\n        // gameLogic.addGold(money);\n\n        //TODO 触发特效\n        playerData.instance.updatePlayerInfo('gold', money);\n        uiManager.instance.hideDialog('main/onlineDouble');\n\n        gameLogic.showFlyReward(constant.REWARD_TYPE.GOLD, ()=>{\n            clientEvent.dispatchEvent('updateGold');\n        });\n\n        if (this.overCallback) {\n            this.overCallback();\n        }\n    }\n\n    onBtnCloseClick () {\n        uiManager.instance.hideDialog('main/onlineDouble');\n    }\n\n    // update (deltaTime: number) {\n    //     // Your update function goes here.\n    // }\n}\n"]}