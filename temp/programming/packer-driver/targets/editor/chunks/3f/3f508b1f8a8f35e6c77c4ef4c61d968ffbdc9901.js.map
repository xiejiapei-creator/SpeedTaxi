{"version":3,"sources":["file:///Users/xiejiapei/Documents/Car/assets/script/ui/common/updateValueLabel.ts"],"names":["_decorator","Label","Component","ccclass","property","requireComponent","updateValueLabel","isPlaying","startVal","endVal","diffVal","currTime","changingTime","label","start","playUpdateValue","node","getComponent","string","toString","update","dt","currVal","parseInt"],"mappings":";;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,S,OAAAA,S;;;;;;;OACtB;AAAEC,QAAAA,OAAF;AAAWC,QAAAA,QAAX;AAAqBC,QAAAA;AAArB,O,GAA0CL,U;;kCAInCM,gB,WAFZH,OAAO,CAAC,kBAAD,C,UACPE,gBAAgB,CAACJ,KAAD,C,+BADjB,MAEaK,gBAFb,SAEsCJ,SAFtC,CAEgD;AAAA;AAAA;AAAA,eAC5CK,SAD4C,GACvB,KADuB;AAAA,eAE5CC,QAF4C,GAEjC,CAFiC;AAAA,eAG5CC,MAH4C,GAGnC,CAHmC;AAAA,eAI5CC,OAJ4C,GAIlC,CAJkC;AAAA,eAK5CC,QAL4C,GAKjC,CALiC;AAAA,eAM5CC,YAN4C,GAM7B,CAN6B;AAAA,eAO5CC,KAP4C,GAO7B,IAP6B;AAAA;;AAS5CC,QAAAA,KAAK,GAAI,CACL;AAEH;;AAEDC,QAAAA,eAAe,CAACP,QAAD,EAAmBC,MAAnB,EAAmCG,YAAnC,EAAyD;AACpE,eAAKJ,QAAL,GAAgBA,QAAhB;AACA,eAAKC,MAAL,GAAcA,MAAd;AAEA,eAAKC,OAAL,GAAe,KAAKD,MAAL,GAAc,KAAKD,QAAlC;AAEA,eAAKG,QAAL,GAAgB,CAAhB;AACA,eAAKC,YAAL,GAAoBA,YAApB;AAEA,eAAKC,KAAL,GAAa,KAAKG,IAAL,CAAUC,YAAV,CAAuBhB,KAAvB,CAAb;AACA,eAAKY,KAAL,CAAWK,MAAX,GAAoBV,QAAQ,CAACW,QAAT,EAApB;AAEA,eAAKZ,SAAL,GAAiB,IAAjB;AACH;;AAEDa,QAAAA,MAAM,CAACC,EAAD,EAAa;AACf,cAAG,CAAC,KAAKd,SAAT,EAAoB;AAChB;AACH;;AAED,cAAG,KAAKI,QAAL,GAAgB,KAAKC,YAAxB,EAAsC;AAClC,iBAAKD,QAAL,IAAiBU,EAAjB;AAEA,gBAAIC,OAAO,GAAG,KAAKd,QAAL,GAAgBe,QAAQ,CAAC,CAAC,KAAKZ,QAAL,GAAgB,KAAKC,YAArB,GAAoC,KAAKF,OAA1C,EAAmDS,QAAnD,EAAD,CAAtC;;AACA,gBAAIG,OAAO,GAAG,KAAKd,QAAnB,EAA6B;AACzBc,cAAAA,OAAO,GAAG,KAAKd,QAAf;AACH,aAFD,MAEO,IAAIc,OAAO,GAAG,KAAKb,MAAnB,EAA2B;AAC9Ba,cAAAA,OAAO,GAAG,KAAKb,MAAf;AACH;;AAED,iBAAKI,KAAL,CAAWK,MAAX,GAAqB,GAAEI,OAAQ,EAA/B;AACA;AACH;;AAED,eAAKT,KAAL,CAAWK,MAAX,GAAqB,GAAE,KAAKT,MAAO,EAAnC;AACA,eAAKF,SAAL,GAAiB,KAAjB;AAEH,SAnD2C,CAqD5C;AACA;AACA;;;AAvD4C,O","sourcesContent":["import { _decorator, Label, Component } from \"cc\";\nconst { ccclass, property, requireComponent } = _decorator;\n\n@ccclass(\"updateValueLabel\")\n@requireComponent(Label)\nexport class updateValueLabel extends Component {\n    isPlaying: boolean = false;\n    startVal = 0;\n    endVal = 0;\n    diffVal = 0;\n    currTime = 0;\n    changingTime = 0;\n    label: Label = null!;\n\n    start () {\n        // Your initialization goes here.\n\n    }\n\n    playUpdateValue(startVal: number, endVal: number, changingTime: number) {\n        this.startVal = startVal;\n        this.endVal = endVal;\n\n        this.diffVal = this.endVal - this.startVal;\n\n        this.currTime = 0;\n        this.changingTime = changingTime;\n\n        this.label = this.node.getComponent(Label)!;\n        this.label.string = startVal.toString();\n\n        this.isPlaying = true;\n    }\n\n    update(dt: number) {\n        if(!this.isPlaying) {\n            return;\n        }\n\n        if(this.currTime < this.changingTime) {\n            this.currTime += dt;\n\n            var currVal = this.startVal + parseInt((this.currTime / this.changingTime * this.diffVal).toString());\n            if (currVal < this.startVal) {\n                currVal = this.startVal;\n            } else if (currVal > this.endVal) {\n                currVal = this.endVal;\n            }\n\n            this.label.string = `${currVal}`;\n            return;\n        }\n\n        this.label.string = `${this.endVal}`;\n        this.isPlaying = false;\n\n    }\n\n    // update (deltaTime) {\n    //     // Your update function goes here.\n    // }\n}\n"]}