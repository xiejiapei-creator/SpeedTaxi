{"version":3,"sources":["file:///Users/xiejiapei/Documents/Car/assets/script/ui/common/loading.ts"],"names":["_decorator","Component","Label","Vec3","updateValueLabel","ccclass","property","loading","targetProgress","oriPos","start","show","lbProgress","playUpdateValue","isPlaying","lbTips","string","set","node","position","updateProgress","progress","tips","curProgress","Number","label","setPosition","x","y","z"],"mappings":";;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;AAAaC,MAAAA,I,OAAAA,I;;AACpCC,MAAAA,gB,iBAAAA,gB;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;yBAGjBO,O,WADZF,OAAO,CAAC,SAAD,C,UAEHC,QAAQ;AAAA;AAAA,+C,UAGRA,QAAQ,CAACJ,KAAD,C,2BALb,MACaK,OADb,SAC6BN,SAD7B,CACuC;AAAA;AAAA;;AAAA;;AAAA;;AAAA,eAOnCO,cAPmC,GAOlB,CAPkB;AAAA,eAQnCC,MARmC,GAQ1B,IAAIN,IAAJ,EAR0B;AAAA;;AAUnCO,QAAAA,KAAK,GAAI;AACN,eAAKC,IAAL,CAAU,CAAV;AACF;;AAEDA,QAAAA,IAAI,CAAED,KAAF,EAAkB;AAClB,cAAIA,KAAJ,EAAW;AACP,iBAAKF,cAAL,GAAsBE,KAAtB;AACH,WAFD,MAEO;AACH,iBAAKF,cAAL,GAAsB,CAAtB;AACH;;AAED,eAAKI,UAAL,CAAgBC,eAAhB,CAAgC,KAAKL,cAArC,EAAqD,KAAKA,cAA1D,EAA0E,CAA1E;AACA,eAAKI,UAAL,CAAgBE,SAAhB,GAA4B,KAA5B;AACA,eAAKC,MAAL,CAAYC,MAAZ,GAAqB,EAArB;AAEA,eAAKP,MAAL,CAAYQ,GAAZ,CAAgB,KAAKL,UAAL,CAAgBM,IAAhB,CAAqBC,QAArC;AACH;;AAEDC,QAAAA,cAAc,CAACC,QAAD,EAAmBC,IAAnB,EAAkC;AAC5C,eAAKd,cAAL,GAAsBa,QAAtB;AAEA,cAAIE,WAAW,GAAGC,MAAM,CAAC,KAAKZ,UAAL,CAAgBa,KAAhB,CAAsBT,MAAvB,CAAxB,CAH4C,CAGY;;AAExD,eAAKJ,UAAL,CAAgBC,eAAhB,CAAgCU,WAAhC,EAA6C,KAAKf,cAAlD,EAAkE,CAAC,KAAKA,cAAL,GAAsBe,WAAvB,IAAsC,EAAxG;;AAEA,cAAID,IAAJ,EAAU;AACN,iBAAKP,MAAL,CAAYC,MAAZ,GAAqBM,IAArB;AACH;;AAED,cAAI,KAAKb,MAAT,EAAiB;AACb,iBAAKG,UAAL,CAAgBM,IAAhB,CAAqBQ,WAArB,CAAiC,IAAIvB,IAAJ,CAAS,KAAKM,MAAL,CAAYkB,CAAZ,GAAgB,EAAzB,EAA6B,KAAKlB,MAAL,CAAYmB,CAAzC,EAA4C,KAAKnB,MAAL,CAAYoB,CAAxD,CAAjC;AACH;AACJ,SA1CkC,CA4CnC;AACA;AACA;;;AA9CmC,O;;;;;iBAEJ,I;;;;;;;iBAGf,I","sourcesContent":["import { _decorator, Component, Label, Node, Vec3 } from \"cc\";\nimport { updateValueLabel } from \"./updateValueLabel\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"loading\")\nexport class loading extends Component {\n    @property(updateValueLabel)\n    lbProgress: updateValueLabel = null!;\n\n    @property(Label)\n    lbTips: Label = null!;\n\n    targetProgress = 0;\n    oriPos = new Vec3();\n\n    start () {\n       this.show(0);\n    }\n\n    show (start?: number) {\n        if (start) {\n            this.targetProgress = start;\n        } else {\n            this.targetProgress = 0;\n        }\n\n        this.lbProgress.playUpdateValue(this.targetProgress, this.targetProgress, 0);\n        this.lbProgress.isPlaying = false;\n        this.lbTips.string = '';\n\n        this.oriPos.set(this.lbProgress.node.position);\n    }\n\n    updateProgress(progress: number, tips?: string) {\n        this.targetProgress = progress;\n\n        let curProgress = Number(this.lbProgress.label.string); //当前进度\n\n        this.lbProgress.playUpdateValue(curProgress, this.targetProgress, (this.targetProgress - curProgress) / 20);\n\n        if (tips) {\n            this.lbTips.string = tips;\n        }\n\n        if (this.oriPos) {\n            this.lbProgress.node.setPosition(new Vec3(this.oriPos.x - 10, this.oriPos.y, this.oriPos.z));\n        }\n    }\n\n    // update (deltaTime: number) {\n    //     // Your update function goes here.\n    // }\n}\n"]}