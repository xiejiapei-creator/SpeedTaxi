{"version":3,"sources":["file:///Users/xiejiapei/SpeedTaxi/assets/script/ui/lottery/lotteryItem.ts"],"names":["_decorator","Component","SpriteFrame","Sprite","Label","resourceUtil","localConfig","playerData","uiManager","constant","i18n","ccclass","property","lotteryItem","carInfo","start","show","car","instance","queryByID","setCarIcon","model","spItem","showReward","lottery","console","log","ID","hasCar","rewardInfo","rewardType","REWARD_TYPE","CAR","amount","showDialog","t","receiveCarTimes","titleInfo","GOLD","LOTTERY","EXCHANGE"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAWSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,K,OAAAA,K;;AAC5CC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,U,iBAAAA,U;;AACAC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,I,iBAAAA,I;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBZ,U;;6BAGjBa,W,WADZF,OAAO,CAAC,aAAD,C,UASHC,QAAQ,CAACV,WAAD,C,UAGRU,QAAQ,CAACT,MAAD,C,UAGRS,QAAQ,CAACR,KAAD,C,2BAfb,MACaS,WADb,SACiCZ,SADjC,CAC2C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eAgBvCa,OAhBuC;AAAA;;AAkBvCC,QAAAA,KAAK,GAAI,CACL;AACH;;AAEDC,QAAAA,IAAI,CAAEC,GAAF,EAAe;AACf,eAAKH,OAAL,GAAe;AAAA;AAAA,0CAAYI,QAAZ,CAAqBC,SAArB,CAA+B,KAA/B,EAAsCF,GAAtC,CAAf;AACA;AAAA;AAAA,4CAAaG,UAAb,CAAwB,KAAKN,OAAL,CAAaO,KAArC,EAA4C,KAAKC,MAAjD,EAAyD,KAAzD,EAAgE,MAAI,CAEnE,CAFD;AAGH;;AAEDC,QAAAA,UAAU,CAAEC,OAAF,EAAgB;AACtBC,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAKZ,OAAL,CAAaa,EAAzB;;AACA,cAAI,CAAC;AAAA;AAAA,wCAAWT,QAAX,CAAoBU,MAApB,CAA2B,KAAKd,OAAL,CAAaa,EAAxC,CAAL,EAAkD;AAC9C;AACA;AACA,gBAAIE,UAAU,GAAG;AACbC,cAAAA,UAAU,EAAE;AAAA;AAAA,wCAASC,WAAT,CAAqBC,GADpB;AAEbC,cAAAA,MAAM,EAAE,CAFK;AAGbN,cAAAA,EAAE,EAAE,KAAKb,OAAL,CAAaa;AAHJ,aAAjB;AAMA;AAAA;AAAA,wCAAUT,QAAV,CAAmBgB,UAAnB,CAA8B,mBAA9B,EAAmD,CAACL,UAAD,EAAa,KAAb,EAAoB;AAAA;AAAA,8BAAKM,CAAL,CAAO,kBAAP,CAApB,EAAgD,MAAI;AACnGX,cAAAA,OAAO,CAACY,eAAR,IAA2B,CAA3B;AACH,aAFkD,CAAnD;AAGH,WAZD,MAYO;AACH;AACA,gBAAIC,SAAS,GAAG;AACZP,cAAAA,UAAU,EAAE;AAAA;AAAA,wCAASC,WAAT,CAAqBO,IADrB;AAEZL,cAAAA,MAAM,EAAE;AAAA;AAAA,wCAASM,OAAT,CAAiBC,QAFb;AAGZb,cAAAA,EAAE,EAAE,KAAKb,OAAL,CAAaa;AAHL,aAAhB;AAKA;AAAA;AAAA,wCAAUT,QAAV,CAAmBgB,UAAnB,CAA8B,mBAA9B,EAAmD,CAACG,SAAD,EAAY,KAAZ,EAAmB;AAAA;AAAA,8BAAKF,CAAL,CAAO,kBAAP,CAAnB,EAA+C,MAAI,CAErG,CAFkD,EAEhD;AAAA;AAAA,8BAAKA,CAAL,CAAO,0BAAP,CAFgD,CAAnD;AAGH;AACJ,SAtDsC,CAwDvC;AACA;AACA;;;AA1DuC,O;;;;;iBAShB,I;;;;;;;iBAGN,I;;;;;;;iBAGA,I","sourcesContent":["import { lottery } from './lottery';\n// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\nimport { _decorator, Component, SpriteFrame, Sprite, Label } from \"cc\";\nimport { resourceUtil } from \"../../framework/resourceUtil\";\nimport { localConfig } from \"../../framework/localConfig\";\nimport { playerData } from \"../../framework/playerData\";\nimport { uiManager } from \"../../framework/uiManager\";\nimport { constant } from \"../../framework/constant\";\nimport { i18n } from \"../../i18nMaster/runtime-scripts/LanguageData\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"lotteryItem\")\nexport class lotteryItem extends Component {\n    /* class member could be defined like this */\n    // dummy = '';\n\n    /* use `property` decorator if your want the member to be serializable */\n    // @property\n    // serializableDummy = 0;\n\n    @property(SpriteFrame)\n    imgGold: SpriteFrame = null!;\n\n    @property(Sprite)\n    spItem: Sprite = null!;\n\n    @property(Label)\n    lbValue: Label = null!;\n    carInfo: any;\n\n    start () {\n        // Your initialization goes here.\n    }\n\n    show (car: string) {\n        this.carInfo = localConfig.instance.queryByID('car', car);\n        resourceUtil.setCarIcon(this.carInfo.model, this.spItem, false, ()=>{\n\n        });\n    }\n\n    showReward (lottery: any) {\n        console.log(this.carInfo.ID);\n        if (!playerData.instance.hasCar(this.carInfo.ID)) {\n            //该车还没有，可以直接追加\n            //调用奖励界面加车\n            let rewardInfo = {\n                rewardType: constant.REWARD_TYPE.CAR,\n                amount: 1,\n                ID: this.carInfo.ID\n            };\n\n            uiManager.instance.showDialog('common/showReward', [rewardInfo, false, i18n.t('showReward.title'), ()=>{\n                lottery.receiveCarTimes += 1;\n            }]);\n        } else {\n            //没有加车,转换成金币\n            let titleInfo = {\n                rewardType: constant.REWARD_TYPE.GOLD,\n                amount: constant.LOTTERY.EXCHANGE,\n                ID: this.carInfo.ID\n            };\n            uiManager.instance.showDialog('common/showReward', [titleInfo, false, i18n.t('showReward.title'), ()=>{\n\n            }, i18n.t(\"showReward.alreadyHadCar\")]);\n        }\n    }\n\n    // update (deltaTime: number) {\n    //     // Your update function goes here.\n    // }\n}\n"]}