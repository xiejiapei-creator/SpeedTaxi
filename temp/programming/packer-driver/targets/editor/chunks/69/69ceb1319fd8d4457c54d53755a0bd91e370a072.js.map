{"version":3,"sources":["file:///Users/xiejiapei/NewProject_1/assets/script/framework/resourceUtil.ts"],"names":["_decorator","Prefab","SpriteFrame","Texture2D","error","instantiate","find","resources","isValid","assetManager","ccclass","resourceUtil","loadRes","url","type","cb","load","err","res","message","getMap","level","levelStr","txtAsset","txt","content","_file","window","decompressFromEncodedURIComponent","objJson","JSON","parse","text","json","errObj","Error","getMapObjs","arrName","progressCb","completeCb","arrUrls","idx","length","push","getUIPrefabRes","prefabPath","createUI","path","parent","prefab","node","setPosition","addChild","getCarsBatch","i","getUICar","name","getCar","setCarIcon","sprite","isBlack","setSpriteFrame","getJsonData","fileName","getData","nativeUrl","spriteFrame","console","setRemoteImage","startsWith","suffix","loadAny","image","texture","setGameIcon","game","getCustomer","setCustomerIcon","getEffect"],"mappings":"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","sourcesContent":["import { _decorator, Prefab, Node, Sprite, SpriteFrame, Texture2D, Asset, error, instantiate, find, resources, isValid, assetManager, LoadCompleteCallback } from \"cc\";\nimport { AssetType } from \"./configuration\";\nconst { ccclass } = _decorator;\n\ndeclare global {\n    namespace globalThis {\n        var LZString: any;\n    }\n}\n\ninterface ITextAsset{\n    text?: string;\n    _file?: string;\n    json?: string\n}\n\n\n\n@ccclass(\"resourceUtil\")\nexport class resourceUtil {\n    public static loadRes<T extends Asset>(url: string, type: AssetType<T> | null, cb?: LoadCompleteCallback<T>) {\n        if(type){\n            resources.load(url, type, (err, res) => {\n                if (err) {\n                    error(err.message || err);\n                    if (cb) {\n                        cb(err, res);\n                    }\n\n                    return;\n                }\n\n                if (cb) {\n                    cb(err, res);\n                }\n            });\n        } else {\n            resources.load(url, (err, res) => {\n                if (err) {\n                    error(err.message || err);\n                    if (cb) {\n                        cb(err, res as T);\n                    }\n\n                    return;\n                }\n\n                if (cb) {\n                    cb(err, res as T);\n                }\n            });\n        }\n    }\n\n    public static getMap(level: number, cb: (err: Error | null, textAsset: any) => void) {\n        let levelStr = 'map';\n        //前面补0\n        if (level >= 100) {\n            levelStr += level;\n        } else if (level >= 10) {\n            levelStr += '0' + level;\n        } else {\n            levelStr += '00' + level;\n        }\n\n        this.loadRes(`gamePackage/map/config/${levelStr}`, null, (err, txtAsset) => {\n            if (err) {\n                cb(err, txtAsset);\n                return;\n            }\n\n            const txt = txtAsset as unknown as ITextAsset;\n            let content = '';\n            if (txt!._file) {\n                if (window['LZString']) {\n                    content = window['LZString'].decompressFromEncodedURIComponent(txt!._file);\n                }\n                const objJson = JSON.parse(content);\n                cb(null, objJson);\n            } else if (txt.text) {\n                if (window['LZString']) {\n                    content = window['LZString'].decompressFromEncodedURIComponent(txt!.text);\n                }\n\n                const objJson = JSON.parse(content);\n                cb(null, objJson);\n            } else if (txt!.json) {\n                cb(null, txt!.json);\n            } else {\n                const errObj = new Error('failed');\n                cb(errObj, null);\n            }\n        });\n    }\n\n    public static getMapObjs(type: string, arrName: Array<string>, progressCb: (completedCount: number, totalCount: number, item: any) => void | null, completeCb: (error: Error | null, asset: Prefab | Prefab[]) => void) {\n        let arrUrls = [];\n        for (let idx = 0; idx < arrName.length; idx++) {\n            arrUrls.push(`gamePackage/map/${type}/${arrName[idx]}`)\n        }\n\n        resources.load(arrUrls, Prefab, progressCb, completeCb);\n    }\n\n    public static getUIPrefabRes(prefabPath: string, cb?: (err: Error | null, asset?: Prefab) => void) {\n        this.loadRes(\"prefab/ui/\" + prefabPath, Prefab, cb);\n    }\n\n    public static createUI(path: string, cb?: (err: Error | null, node?: Node) => void, parent?: Node | null) {\n        this.getUIPrefabRes(path, (err: Error | null, prefab?: Prefab) => {\n            if (err) return;\n            const node = instantiate(prefab!);\n            node.setPosition(0, 0, 0);\n            if (!parent) {\n                parent = find(\"Canvas\");\n            }\n\n            parent!.addChild(node);\n            if(cb){\n                cb(null, node);\n            }\n        });\n    }\n\n    public static getCarsBatch(arrName: Array<string>, progressCb: (completedCount: number, totalCount: number, item: any) => void | null, completeCb: (error: Error | null, asset: Prefab) => void) {\n        let arrUrls = [];\n        for (let idx = 0; idx < arrName.length; idx++) {\n            arrUrls.push(`prefab/car/car${arrName[idx]}`);\n        }\n\n        for (let i = 0; i < arrUrls.length; i++) {\n            const url = arrUrls[i];\n            if (!progressCb) {\n                resources.load(url, Prefab, completeCb);\n            } else {\n                resources.load(url, Prefab, progressCb, completeCb);\n            }\n        }\n    }\n\n    public static getUICar (name:string, cb: LoadCompleteCallback<Prefab>) {\n        this.loadRes(`prefab/ui/car/uiCar${name}`, Prefab, cb);\n    }\n\n    public static getCar(name: string, cb: LoadCompleteCallback<Prefab>) {\n        this.loadRes(`prefab/car/car${name}`, Prefab, cb);\n    }\n\n    public static setCarIcon(name: string, sprite: Sprite, isBlack: boolean, cb: LoadCompleteCallback<SpriteFrame>) {\n        let path = `gamePackage/texture/car/car${name}`;\n        if (isBlack) {\n            path += 'Black';\n        }\n\n        this.setSpriteFrame(path, sprite, cb);\n    }\n\n    public static getJsonData(fileName: string, cb: (err: Error | null, asset: any) => void) {\n        resources.load(\"datas/\" + fileName, (err, content) => {\n            if (err) {\n                error(err.message || err);\n                return;\n            }\n\n            const txt = content as unknown as ITextAsset;\n            if (txt.json) {\n                cb(err, txt.json);\n            } else {\n                const errObj = new Error('failed!!!')\n                cb(errObj, null);\n            }\n        });\n    }\n\n    public static getData(fileName: string, cb: (err: Error | null, asset: any) => void) {\n        resources.load(\"datas/\" + fileName, function (err, content) {\n            if (err) {\n                error(err.message || err);\n                return;\n            }\n\n            const txt = content as unknown as ITextAsset;\n            let text = txt!.text;\n            if (!text) {\n                resources.load(content.nativeUrl, (err, content) => {\n                    text = content as unknown as string;\n                    cb(err, text);\n                });\n\n                return;\n            }\n\n            cb(err, text);\n        });\n    }\n\n    public static setSpriteFrame<T extends Asset>(path: string, sprite: Sprite, cb: LoadCompleteCallback<SpriteFrame>) {\n        this.loadRes<SpriteFrame>(path + '/spriteFrame', SpriteFrame, (err, spriteFrame) => {\n            if (err) {\n                console.error('set sprite frame failed! err:', path, err);\n                cb(err, spriteFrame);\n                return;\n            }\n\n            if (sprite && isValid(sprite)) {\n                sprite.spriteFrame = spriteFrame;\n                cb(null, spriteFrame);\n            }\n        });\n    }\n\n    /**\n     * 根据英雄的文件名获取头像\n     */\n    public static setRemoteImage(url: string, sprite: Sprite, cb: LoadCompleteCallback<SpriteFrame>) {\n        if (!url || !url.startsWith('http')) {\n            return;\n        }\n\n        let suffix = \"png\";\n        assetManager.loadAny([{ url: url, type: suffix }],null,  (err, image)=>{\n            if (err) {\n                console.error('set avatar failed! err:', url, err);\n                cb(err, image);\n                return;\n            }\n\n            let texture = new Texture2D();\n            texture.image = image;\n\n            let spriteFrame = new SpriteFrame();\n            spriteFrame.texture = texture;\n            cb && cb(null, spriteFrame);\n        })\n    }\n\n    /**\n     * 设置更多游戏的游戏图标\n     */\n    public static setGameIcon (game: string, sprite: Sprite, cb: LoadCompleteCallback<SpriteFrame>) {\n        if (game.startsWith('http')) {\n            this.setRemoteImage(game, sprite, cb);\n        } else {\n            this.setSpriteFrame('gamePackage/textures/icons/games/' + game, sprite, cb);\n        }\n    }\n\n    /**\n     * 获取顾客预制体\n     *\n     * @static\n     * @param {string} name\n     * @param {Function} cb\n     * @memberof resourceUtil\n     */\n    public static getCustomer(name: string, cb: LoadCompleteCallback<Prefab>) {\n        this.loadRes(`gamePackage/map/customer/customer${name}`, Prefab, cb);\n    }\n\n    public static setCustomerIcon(name: string, sprite: Sprite, cb: (err: Error | null) => void) {\n        let path = `gamePackage/texture/head/head${name}`;\n\n        this.setSpriteFrame(path, sprite, cb);\n    }\n\n    public static getEffect(name: string, cb: LoadCompleteCallback<Prefab>) {\n        this.loadRes(`prefab/effect/${name}`, Prefab, cb);\n    }\n}\n"]}