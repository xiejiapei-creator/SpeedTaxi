{"version":3,"sources":["file:///Users/xiejiapei/Documents/Car/assets/script/ui/fight/fightUI.ts"],"names":["_decorator","Component","Label","Node","Sprite","SpriteFrame","Animation","playerData","clientEvent","localConfig","resourceUtil","i18n","ccclass","property","fightUI","type","displayName","constructor","fightManager","carManager","isShowGuide","showGuideTime","start","onEnable","on","updateCarProgress","showCustomerTalk","onMakeMoney","showGuide","onDisable","off","onTouchStart","nodeGuide","getComponent","stop","active","show","manager","refreshUI","mainCar","isMoving","isShow","ani","play","getState","setTime","onBtnAgainClick","dispatchEvent","onBtnChangeCameraRotation","changeCameraFollowRotation","maxProgress","mapManager","levelProgressCnt","idx","progress","spriteFrame","imgProgressNoActive","length","level","instance","playerInfo","curLevel","string","targetLevel","spStart","imgLevelFinished","spEnd","imgLevelUnfinished","objProgress","getCurrentProgress","cur","end","isOver","imgProgressFinished","imgProgressActive","isFinishedLevel","customerId","arrTalk","getTableArr","arrFilter","forEach","element","push","rand","Math","floor","random","objRand","lbTalk","t","content","setCustomerIcon","spHead","nodeTalk","scheduleOnce","value","aniMakeMoney","node","lbMake","once","EventType","FINISHED","update","deltaTime","window","i18nConfig","curLang","spShowGuideTip","img01","img01En","img02","img02En"],"mappings":"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","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\n\nimport { _decorator, Component, Label, Node, Sprite, SpriteFrame, Animation } from \"cc\";\n\nimport { carManager } from \"../../fight/carManager\";\nimport { playerData } from \"../../framework/playerData\";\nimport { clientEvent } from \"../../framework/clientEvent\";\nimport { fightManager } from \"../../fight/fightManager\";\nimport { localConfig } from \"../../framework/localConfig\";\nimport { resourceUtil } from \"../../framework/resourceUtil\";\nimport { i18n } from \"../../i18nMaster/runtime-scripts/LanguageData\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"fightUI\")\nexport class fightUI extends Component {\n    // Property.\n    // yourProperty = \"some what\";\n\n    @property(Sprite)\n    spStart: Sprite = null!;\n\n    @property(Sprite)\n    spEnd: Sprite = null!;\n\n    @property({type: Label})\n    curLevel: Label = null!;\n\n    @property({type: Label})\n    targetLevel: Label = null!;\n\n    @property({type: Node, displayName: \"进度项\"})\n    public progress:Node[] = [];\n\n    @property(Node)\n    nodeTalk: Node = null!;\n\n    @property(Label)\n    lbTalk: Label = null!;\n\n    @property(Label)\n    lbMake: Label = null!;\n\n    @property(Sprite)\n    spHead: Sprite = null!;\n\n    @property(SpriteFrame)\n    imgLevelFinished: SpriteFrame = null!;\n\n    @property(SpriteFrame)\n    imgLevelUnfinished: SpriteFrame = null!;\n\n    @property(SpriteFrame)\n    imgProgressNoActive: SpriteFrame = null!;\n\n    @property(SpriteFrame)\n    imgProgressActive: SpriteFrame = null!;\n\n    @property(SpriteFrame)\n    imgProgressFinished: SpriteFrame = null!;\n\n    @property(Animation)\n    aniMakeMoney: Animation = null!;\n\n    @property(Node)\n    nodeGuide: Node = null!;\n\n\n    fightManager: fightManager = null!;\n\n    carManager: carManager = null!;\n\n    @property(Sprite)\n    spShowGuideTip: Sprite = null!;\n    @property(SpriteFrame)\n    img01: SpriteFrame = null!;\n    @property(SpriteFrame)\n    img02: SpriteFrame = null!;\n    @property(SpriteFrame)\n    img01En: SpriteFrame = null!;\n    @property(SpriteFrame)\n    img02En: SpriteFrame = null!;\n\n    isShowGuide: boolean = false;//是否展示showGuide动画\n    showGuideTime: number = 0;\n\n    constructor() {\n        super();\n    }\n\n    public start() {\n\n    }\n\n    onEnable () {\n        clientEvent.on('greetingCustomer', this.updateCarProgress, this);\n        clientEvent.on('takeCustomer', this.updateCarProgress, this);\n        clientEvent.on('gameOver', this.updateCarProgress, this);\n        clientEvent.on('showTalk', this.showCustomerTalk, this);\n        clientEvent.on('makeMoney', this.onMakeMoney, this);\n        clientEvent.on('showGuide', this.showGuide, this);\n    }\n\n    onDisable () {\n        clientEvent.off('greetingCustomer', this.updateCarProgress, this);\n        clientEvent.off('takeCustomer', this.updateCarProgress, this);\n        clientEvent.off('gameOver', this.updateCarProgress, this);\n        clientEvent.off('showTalk', this.showCustomerTalk, this);\n        clientEvent.off('makeMoney', this.onMakeMoney, this);\n        clientEvent.off('showGuide', this.showGuide, this);\n    }\n\n    onTouchStart () {\n        this.nodeGuide.getComponent(Animation)!.stop();\n        this.nodeGuide.active = false;\n    }\n\n    public show (manager: fightManager) {\n        this.fightManager = manager;\n        this.carManager = this.fightManager.carManager;\n\n        this.refreshUI();\n\n        if (!this.carManager.mainCar.isMoving) {\n            this.showGuide(true);\n        }\n    }\n\n    public showGuide (isShow: boolean) {\n        this.nodeGuide.active = isShow;\n        let ani = this.nodeGuide.getComponent(Animation)!;\n        isShow? ani.play(): ani.stop();\n\n        if (isShow) {\n            this.isShowGuide = true;\n            this.showGuideTime = 0;\n\n            ani.getState('showGuide').setTime(0);\n        } else {\n            this.isShowGuide = false;\n            this.showGuideTime = 0;\n        }\n    }\n\n    public onBtnAgainClick () {\n        // this.fightManager.reset();\n        clientEvent.dispatchEvent('newLevel', false);\n    }\n\n    public onBtnChangeCameraRotation () {\n        this.carManager.changeCameraFollowRotation();\n    }\n\n    public refreshUI () {\n        let maxProgress = this.fightManager.mapManager.levelProgressCnt; //总共有多少个乘客\n\n        //设置总共有多少个节点\n        for (let idx = 0; idx < maxProgress; idx++) {\n            this.progress[idx].active = true;\n            this.progress[idx].getComponent(Sprite)!.spriteFrame = this.imgProgressNoActive;\n        }\n\n        for (let idx = maxProgress; idx < this.progress.length; idx++) {\n            this.progress[idx].active = false;\n        }\n\n        let level = playerData.instance.playerInfo ? playerData.instance.playerInfo.level : 1;\n        this.curLevel.string = `${level}`;\n        this.targetLevel.string = `${level + 1}`;\n\n        this.spStart.spriteFrame = this.imgLevelFinished;\n        this.spEnd.spriteFrame = this.imgLevelUnfinished;\n    }\n\n    public updateCarProgress () {\n        //刷新进度\n        let objProgress = this.carManager.getCurrentProgress();\n        let start = objProgress.cur;\n        let end = objProgress.isOver ? start : start - 1;\n\n        for (let idx = 0; idx < end; idx++) {\n            this.progress[idx].getComponent(Sprite)!.spriteFrame = this.imgProgressFinished;\n        }\n\n        if (!objProgress.isOver) {\n            this.progress[end].getComponent(Sprite)!.spriteFrame = this.imgProgressActive;\n        }\n\n        if (this.fightManager.isFinishedLevel) {\n            this.spEnd.spriteFrame = this.imgLevelFinished;\n        }\n    }\n\n    /**\n     * 顾客上车后或者接到新订单时会有提示\n     *\n     * @param {string} customerId\n     * @param {number} type\n     * @memberof fightUI\n     */\n    showCustomerTalk (customerId: string, type: number) {\n        let arrTalk = localConfig.instance.getTableArr('talk');\n        // Note:\n        let arrFilter: any[] = [];\n        arrTalk.forEach((element: any) => {\n            if (element.type === type) {\n                arrFilter.push(element);\n            }\n        });\n\n        let rand = Math.floor(Math.random() * arrFilter.length);\n        let objRand = arrFilter[rand];\n\n        this.lbTalk.string = i18n.t(`talk.${objRand.content}`);\n\n        resourceUtil.setCustomerIcon(customerId, this.spHead, ()=>{\n\n        });\n\n        //显示3秒\n        this.nodeTalk.active = true;\n        this.nodeTalk.getComponent(Animation)!.play();\n        this.scheduleOnce(()=>{\n            this.nodeTalk.active = false;\n        }, 4);\n\n\n    }\n\n    onMakeMoney (value: number) {\n        this.aniMakeMoney.node.active = true;\n        this.lbMake.string = `+${value}`;\n\n        this.aniMakeMoney.play();\n        this.aniMakeMoney.once(Animation.EventType.FINISHED, ()=>{\n            this.aniMakeMoney.node.active = false;\n        }, this);\n    }\n\n    public update(deltaTime: number) {\n        // Your update function goes here.\n\n        if (this.isShowGuide) {\n            if (Math.floor(this.showGuideTime) === 0) {\n                if (window.i18nConfig.curLang === 'zh') {\n                    this.spShowGuideTip.spriteFrame = this.img01;\n                } else if (window.i18nConfig.curLang === 'en') {\n                    this.spShowGuideTip.spriteFrame = this.img01En;\n                }\n            }\n\n            this.showGuideTime += deltaTime;\n\n            if (Math.floor(this.showGuideTime) === 1) {\n                if (window.i18nConfig.curLang === 'zh') {\n                    this.spShowGuideTip.spriteFrame = this.img02;\n                } else if (window.i18nConfig.curLang === 'en') {\n                    this.spShowGuideTip.spriteFrame = this.img02En;\n                }\n            } else if (Math.floor(this.showGuideTime) === 2) {\n                if (window.i18nConfig.curLang === 'zh') {\n                    this.spShowGuideTip.spriteFrame = this.img01;\n                } else if (window.i18nConfig.curLang === 'en') {\n                    this.spShowGuideTip.spriteFrame = this.img01En;\n                }\n                this.showGuideTime = 0;\n            }\n        }\n    }\n}\n"]}