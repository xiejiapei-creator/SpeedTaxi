{"version":3,"sources":["file:///Users/xiejiapei/SpeedTaxi/assets/script/ui/main/invincible.ts"],"names":["_decorator","Component","Widget","Sprite","Node","gameLogic","constant","poolManager","localConfig","playerData","resourceUtil","uiManager","clientEvent","ccclass","property","invincible","_callback","undefined","currentCar","start","show","callback","updateRewardIcon","SHARE_FUNCTION","INVINCIBLE","spIcon","err","type","instance","putNode","carInfo","queryByID","showCar","toString","getUICar","model","prefab","console","error","getNode","nodeCarParent","onBtnCloseClick","hideDialog","onBtnOKClick","openReward","dispatchEvent"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,I,OAAAA,I;;AACvCC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,U,iBAAAA,U;;AACAC,MAAAA,Y,iBAAAA,Y;;AACAC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,W,iBAAAA,W;;;;;;;OAEH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBd,U;;4BAGjBe,U,WADZF,OAAO,CAAC,YAAD,C,UAKHC,QAAQ,CAACV,IAAD,C,UAGRU,QAAQ,CAACZ,MAAD,C,UAGRY,QAAQ,CAACX,MAAD,C,2BAXb,MACaY,UADb,SACgCd,SADhC,CAC0C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eAatCe,SAbsC,GAaJC,SAbI;AAAA,eActCC,UAdsC,GAcZ,IAdY;AAAA;;AAgBtCC,QAAAA,KAAK,GAAI,CACL;AACH;;AAEDC,QAAAA,IAAI,CAAEC,QAAF,EAAsB;AACtB,eAAKL,SAAL,GAAiBK,QAAjB;AAEA;AAAA;AAAA,sCAAUC,gBAAV,CAA2B;AAAA;AAAA,oCAASC,cAAT,CAAwBC,UAAnD,EAA+D,KAAKC,MAApE,EAA4E,CAACC,GAAD,EAAMC,IAAN,KAAa,CAExF,CAFD;;AAIA,cAAI,KAAKT,UAAT,EAAqB;AACjB;AAAA;AAAA,4CAAYU,QAAZ,CAAqBC,OAArB,CAA6B,KAAKX,UAAlC;AACA,iBAAKA,UAAL,GAAkB,IAAlB;AACH,WAVqB,CAYtB;;;AACA,cAAIY,OAAO,GAAG;AAAA;AAAA,0CAAYF,QAAZ,CAAqBG,SAArB,CAA+B,KAA/B,EAAsC;AAAA;AAAA,wCAAWH,QAAX,CAAoBI,OAApB,CAA4BC,QAA5B,EAAtC,CAAd;AAEA;AAAA;AAAA,4CAAaC,QAAb,CAAsBJ,OAAO,CAACK,KAA9B,EAAqC,CAACT,GAAD,EAAMU,MAAN,KAAe;AAChD,gBAAIV,GAAJ,EAAS;AACLW,cAAAA,OAAO,CAACC,KAAR,CAAcZ,GAAd,EAAmBI,OAAO,CAACK,KAA3B;AACA;AACH;;AAED,iBAAKjB,UAAL,GAAkB;AAAA;AAAA,4CAAYU,QAAZ,CAAqBW,OAArB,CAA6BH,MAA7B,EAAqC,KAAKI,aAA1C,CAAlB;AACH,WAPD;AAQH;;AAEDC,QAAAA,eAAe,GAAI;AACf;AAAA;AAAA,sCAAUb,QAAV,CAAmBc,UAAnB,CAA8B,iBAA9B;AACA,eAAK1B,SAAL,IAAkB,KAAKA,SAAL,EAAlB;AACH;;AAED2B,QAAAA,YAAY,GAAI;AACZ;AAAA;AAAA,sCAAUC,UAAV,CAAqB;AAAA;AAAA,oCAASrB,cAAT,CAAwBC,UAA7C,EAAyD,CAACE,GAAD,EAAMC,IAAN,KAAa;AAClE,gBAAID,GAAJ,EACI;AAEJ;AAAA;AAAA,4CAAYmB,aAAZ,CAA0B,gBAA1B;AAEA,iBAAKJ,eAAL;AACH,WAPD;AAQH,SA3DqC,CA6DtC;AACA;AACA;;;AA/DsC,O;;;;;iBAKhB,I;;;;;;;iBAGL,I;;;;;;;iBAGA,I","sourcesContent":["import { _decorator, Component, Widget, Sprite, Node} from \"cc\";\nimport { gameLogic } from \"../../logic/gameLogic\";\nimport { constant } from \"../../framework/constant\";\nimport { poolManager } from \"../../framework/poolManager\";\nimport { localConfig } from \"../../framework/localConfig\";\nimport { playerData } from \"../../framework/playerData\";\nimport { resourceUtil } from \"../../framework/resourceUtil\";\nimport { uiManager } from \"../../framework/uiManager\";\nimport { clientEvent } from \"../../framework/clientEvent\";\n\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"invincible\")\nexport class invincible extends Component {\n    /* class member could be defined like this */\n    // dummy = '';\n\n    @property(Node)\n    nodeCarParent: Node = null!;\n\n    @property(Widget)\n    wgMenu: Widget = null!;\n\n    @property(Sprite)\n    spIcon: Sprite = null!;\n\n    _callback: Function | undefined = undefined;\n    currentCar: Node | null = null;\n\n    start () {\n        // Your initialization goes here.\n    }\n\n    show (callback: Function) {\n        this._callback = callback;\n\n        gameLogic.updateRewardIcon(constant.SHARE_FUNCTION.INVINCIBLE, this.spIcon, (err, type)=>{\n\n        });\n\n        if (this.currentCar) {\n            poolManager.instance.putNode(this.currentCar);\n            this.currentCar = null;\n        }\n\n        //随机辆未拥有的车\n        let carInfo = localConfig.instance.queryByID('car', playerData.instance.showCar.toString());\n\n        resourceUtil.getUICar(carInfo.model, (err, prefab)=>{\n            if (err) {\n                console.error(err, carInfo.model);\n                return;\n            }\n\n            this.currentCar = poolManager.instance.getNode(prefab, this.nodeCarParent);\n        });\n    }\n\n    onBtnCloseClick () {\n        uiManager.instance.hideDialog('main/invincible');\n        this._callback && this._callback();\n    }\n\n    onBtnOKClick () {\n        gameLogic.openReward(constant.SHARE_FUNCTION.INVINCIBLE, (err, type)=>{\n            if (err)\n                return;\n\n            clientEvent.dispatchEvent('showInvincible');\n\n            this.onBtnCloseClick();\n        });\n    }\n\n    // update (deltaTime: number) {\n    //     // Your update function goes here.\n    // }\n}\n"]}